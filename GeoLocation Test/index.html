<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Get Location</title>
	<!-- jQuery -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
	<a href="#" id="get_location">Get Location</a>
	<div id="map">
		<iframe id="google_map" width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com?output=embed" frameborder="0"></iframe>
	</div>
	<div id="location_details">
		
	</div>
	
	<script src="js/geoposition.js"></script>
	<script src="js/modernizr.js"></script>
	<script>

	//VIDEO 1
	//=========================================================================================
		/*var c = function(position) {
			var latitude = position.coords.latitude,
			longitude = position.coords.longitude
			coords = latitude + ", " + longitude;

			document.getElementById("google_map").setAttribute("src", "https://maps.google.com/?q=" + coords + "&z=16&output=embed");

			document.getElementById("location_details").innerHTML = 
			"<h2> Your Coordinates </h2>" + 
			"<p>" + coords + "</p>";

		}

		document.getElementById("get_location").onclick = function() {
			navigator.geolocation.getCurrentPosition(c);
			return false;
		}*/

	//VIDEO 2
	//=========================================================================================
		var c = function(position) {
			var latitude = position.coords.latitude,
			longitude = position.coords.longitude,
			accuracy = position.coords.accuracy,
			coords = latitude + ", " + longitude;



			document.getElementById("google_map").setAttribute("src", "https://maps.google.com/?q=" + coords + "&z=16&output=embed");

			/*$("#location_details").append("<h2> Your Coordinates </h2>" + 
			"<p>" + coords + "</p>" +
			"<p> Accuracy: " + accuracy + " feet</p>");*/

			console.log("User ID: ");
			console.log("Time: ");
			console.log("Coordinates: " + coords);
			console.log("Accuracy: " + accuracy + " feet");
			console.log("\n");

		};

		var e = function(error) {
			if (error.code === 1 ) {
				alert("unable to get location");
			} else if (error.code === 2) {
				alert("Internet connection failed.");
			} else if (error.code === 3) {
				alert("connection timed out");
			}
		}

		$("#get_location").on("click", function() {
			getLocation();
		});

		var getLocation = function() {
			navigator.geolocation.getCurrentPosition(c, e, {
				enableHighAccuracy: true,
				maximumAge: 60000,
				timeout: 2000
			});
			return false;
		};

		var autoLocation = function() {
			var counter = 0;
			var timeoutID = setInterval(function() {
				getLocation();

				counter++;
				if (counter >= 5) {
					clearInterval(timeoutID);
				}
			}, 5000);
		}


		/*var counter = 0;
		var timeoutID = setInterval(function() {
			getLocation();

			counter++;
			if (counter >= 5) {
				clearInterval(timeoutID);
			}
		}, 5000);*/

		$(document).ready(function() {
			getLocation();
			setTimeout(autoLocation, 0);
			/*setTimeout(var timeoutID = setInterval(function() {
				getLocation();

				counter++;
				if (counter >= 5) {
					clearInterval(timeoutID);
				}
			}, 5000), 0);*/
		})

		
	//VIDEO 3
	//=========================================================================================

		/*if (!Modernizr.geolocation) {
			alert("Geolocation Not Supported");
		} else {
			var c = function(position) {
				var latitude = position.coords.latitude,
				longitude = position.coords.longitude,
				accuracy = position.coords.accuracy,
				coords = latitude + ", " + longitude;



				document.getElementById("google_map").setAttribute("src", "https://maps.google.com/?q=" + coords + "&z=16&output=embed");

				document.getElementById("location_details").innerHTML = 
				"<h2> Your Coordinates </h2>" + 
				"<p>" + coords + "</p>" +
				"<p> Accuracy: " + accuracy + " feet</p>";

			};

			var e = function(error) {
				if (error.code === 1 ) {
					alert("unable to get location");
				} else if (error.code === 2) {
					alert("Internet connection failed.");
				} else if (error.code === 3) {
					alert("connection timed out");
				}
			}

			document.getElementById("get_location").onclick = function() {
				navigator.geolocation.getCurrentPosition(c, e, {
					enableHighAccuracy: true,
					maximumAge: 60000,
					timeout: 500
				});
				return false;
			};
		}*/

	//VIDEO 4 - Geoposition.js
	//=========================================================================================
		/*document.getElementById("get_location").onclick = function() {
			var success = function(position) {
				var latitude = position.coords.latitude,
				longitude = position.coords.longitude,
				coords = latitude + "," + longitude;

				alert(coords);
			}

			var error = function() {
				alert("geolocation not supported");
			}

			if (geoPosition.init()) {
				geoPosition.getCurrentPosition(success, error);
			}
			
			return false;
		};*/
	</script>
</body>
</html>